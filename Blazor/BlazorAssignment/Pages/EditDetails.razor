@page "/EditDetails/{Id}"
@using BlazorAssignment.Repository
@inject IStudent student
@inject HttpClient httpClient
@inject NavigationManager _navigate

<h3>EditDetails</h3>

<EditForm Model="@studentDetails" OnValidSubmit="@UpdateData">

    <div class="form-horizontal">
        <hr />
        <div class="form-group">
            <label>Name:</label>
            <div class="col-md-10">
                <InputText type="text" @bind-Value="studentDetails.StudentName" />
            </div>
        </div>
        <div class="form-group">
            <label>Course</label>
            <div class="col-md-10">
                <InputText type="text" @bind-Value="studentDetails.Course" />

            </div>
        </div>

        <div class="form-group">
            <label>Email</label>
            <div class="col-md-10">
                <InputText type="text" @bind-Value="studentDetails.Email" />
            </div>
        </div>

        <div class="form-group">
            <label>Address</label>
            <div class="col-md-10">
                <InputText type="text" @bind-Value="studentDetails.Address" />
            </div>
        </div>

        <div class="form-group">
            <label>Gender</label>
            <div class="col-md-10">
                <InputText type="text" @bind-Value="studentDetails.Gender" />
            </div>
        </div>

        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" value="Save Changes" class="btn btn-primary" />
            </div>
        </div>
    </div>

</EditForm>

@code{

    [Parameter]
    public string Id { get; set; }

    TblStudentDetails studentDetails;

    protected override void OnInitialized()
    {

        studentDetails= new TblStudentDetails();
        GetStudentById();

        base.OnInitialized();

    }

    public void GetStudentById()
    {
        studentDetails=student.GetStudentById(Id);

    }

    public void UpdateData()
    {
        var res = student.EditDetails(studentDetails);
        if (res)
        {
            StateHasChanged();
            _navigate.NavigateTo("allstudents");
        }

    }
}

