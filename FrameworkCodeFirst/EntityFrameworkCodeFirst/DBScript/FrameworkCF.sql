create database Trans
USE [Trans]
GO
/****** Object:  Table [dbo].[__MigrationHistory]    Script Date: 21-03-2020 15:20:21 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[__MigrationHistory](
	[MigrationId] [nvarchar](150) NOT NULL,
	[ContextKey] [nvarchar](300) NOT NULL,
	[Model] [varbinary](max) NOT NULL,
	[ProductVersion] [nvarchar](32) NOT NULL,
 CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY CLUSTERED 
(
	[MigrationId] ASC,
	[ContextKey] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Customers]    Script Date: 21-03-2020 15:20:21 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Customers](
	[CustId] [int] IDENTITY(1,1) NOT NULL,
	[CustName] [nvarchar](max) NULL,
	[CustPhone] [bigint] NULL,
	[CustAddress] [nvarchar](max) NULL,
	[NoOfOrders] [int] NULL,
 CONSTRAINT [PK_dbo.Customers] PRIMARY KEY CLUSTERED 
(
	[CustId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Orders]    Script Date: 21-03-2020 15:20:21 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Orders](
	[OrderId] [int] IDENTITY(1,1) NOT NULL,
	[OrderAmount] [decimal](18, 2) NULL,
	[OrderDate] [datetime] NULL,
	[CustId] [int] NOT NULL,
	[ProdId] [int] NOT NULL,
 CONSTRAINT [PK_dbo.Orders] PRIMARY KEY CLUSTERED 
(
	[OrderId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Products]    Script Date: 21-03-2020 15:20:21 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Products](
	[ProdId] [int] IDENTITY(1,1) NOT NULL,
	[ProdName] [nvarchar](max) NULL,
	[ProdPrice] [decimal](18, 2) NULL,
 CONSTRAINT [PK_dbo.Products] PRIMARY KEY CLUSTERED 
(
	[ProdId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
INSERT [dbo].[__MigrationHistory] ([MigrationId], [ContextKey], [Model], [ProductVersion]) VALUES (N'202003202150007_InitialCreate', N'EntityFrameworkCodeFirst.Models.TransactionContext', 0x1F8B0800000000000400DD5ACD6EE33610BE17E83B083AB545D64AB245B10DEC2D52675304DDFC204E16BD058C347684A52895A45207459FAC873E525FA143499464529225DB4916852F32C9F9381CCE0C471FF5EFDFFF8C7F5A46D479042EC2984DDC83D1BEEB00F3E320648B899BCAF99B77EE4FEFBFFE6AFC218896CE273DEEAD1A87924C4CDC07299323CF13FE0344448CA2D0E7B188E772E4C7914782D83BDCDFFFD13B38F000215CC4729CF175CA641841F607FF4E63E643225342CFE300A828DAB16796A13A17240291101F26EE0794944FA71C5BFE88F9E7290A9C865CC8512EEA3AC73424A8D60CE8DC750863B12412953EBA1530933C668B59820D84DE3C2580E3E6840A281673540DEFBBAEFD43B52EAF12D4507E2A641C0D043C785B18CA33C53732B75B1A124D991B4EAD3A33E7C49D665300771D73B2A329E56AE05A6B8F34C69ED33672AFF41A742EF5DB73A6299529870983547242F79CABF49E86FEAFF074137F06366129A575D55179EC5B69C0A62B1E27C0E5D335CC6B0B3A0B5CC75B95F54CE152D490CB977CC6E4DB43D7B94025C83D85D2436AE699C998C32FC0801309C1159112386EF0590099112C0D1AE6534F7A46744B0C37D73927CB8FC016F261E2E2A3EB9C864B08744BA1C52D0B313A5148F214FA4C74F51033A8ADED87EFFB481D070107219E5DC38BF8727EC903F410C3FC86D805790C1799F10D002D7C0D34EB160F619207FF28EFBA3BFDAC1684BAF238BA8E69295374DCDD10BE00ECBF899B7A6771CA7D631963AF8AA5CE08D3CA6D1E5F39C217115D992A9B845729F852F1954D781CC578C8E8494FC00F23425DE78AE35371D8BD739D994F940AB6C335419EA03625203EDF8451AF105CBFF66E0CFC1B0CC6688D181D0F9B478C8E89E688D1F1D45F1FB5BE467D5447EA4B71A703A9D2C8E8B2A2D8ECDF2A8E35D83691AC31BE8858D61E353494FB79E2EE2259CDF72227A59AE88A873E6C9C303639A106F8B719736DFEDFC7BF8F8588FD30536645471DF8AB0BFBC002A7330BE43B53E50FDC1E74DB304147C5C927EE7796ADDA20CB20AE20AB227515F4C035BDFC929D000509CEB19FD7DB53227C12D85B8F5609565B3030802B8F24145F4504865AC8A41D4521F3C384D02ED50DA10165AA52AC9CC2EC398104988A99AE9DD86EEE720AC358EB6C33F66AEED4ED65A6BBB73945ABEF576E5165E467748B768D1A1CB5AFEF6FE46B2D16E9B3E3CDA97E90B7B5AC7EBBD977EE6F79AE43198912C00B056E386182645BAFBA60291B0EF15B01C5392E8AE3C27404053D0369BC39E3765719D64A5856D25B05D10E6321E88E35F25508580855978151339DA94859F5D5C6349685E64EAE3B1F4ABDAB255BDEB0EE40A861D46C6F06F0EAEA7AACDC3A7FEDB577E6AC5E59ABA67BDBBEF4CA356BEDD861005D0994D151316C5E4EB1692ACE6BE1E2C6E72449B0F6AA7173458B33CB89B9E99BD970922ACA313C5F347055A5B6E54C584D920518BD38B52EA1F1AD8CDC1355FD4D83C81AD6900B5A424C4F6886BBBD6B3AF2B4847ACEA5FA52670D79B40043D945A4D270564537C4802D9A51A68412DEF21A3A8D691AB1EE5AA01B252FC74D9CBC751852C14C995045F330AC92AF32D1CA8EFE78754EAA0E576FB7D1C69EB16BD68967398B557FAC7A5F2FDF6C4D4B9B3B6633640FB76C136C3374490CD5ADDC4233ADC5D17C8F85A53B06E2E5648F8596370F73CEED034F97517594B6D2EAD55CB13CDD76E98C6DA03DDCB15D743766EE42B1B364D53A0CA960254CA8A2F98537DFAA23CC21E5EC653D61D40DE3E20C5F7FD1671DEAF910C5C8C48F61A00EF4D99390108DD480D1EC773AA521A848D703CE090BE72064CE95B987FB0787C6F5E0977355E70911D09EF775AF7635162AEBAEA5F406B2DBE66D187B24DC7F20FC9B882CBFADA36D74E3751F2E32AD87C31857605BA9655F73AD556AE825D32BDEE83C8B5B345CE2046B39D961BB625DEA04F82CB34B9DE1EE6298C3E218CE5800CB89FB672672E49CFD76974BED39991A47CEBEF3D79637437D27CEA5064C3CFCA2E4D5EE249EC517CD6B88AD728175D5B09D5BEF9AE4AFF8AB9766E14D12E8E5E8D58E57F167A4EFFF7F84FD6B52F42FED331D2F26CF42C20FF0995727DD6D3EAE1F9FDE49A7E7E53FA6CBFB1877394F87ED64F060B6BD097E974C7C13FE2BF1F4A6B95739C5F5ECFC765CF48B92F1C3E9F75D2C7100DD6EBF0E6334D6BE8EC53C20C24505A1BE9565E0AFC46139E68CCD639D0E0C8DF410A318390749B0EA25C75C8673E24BECF6F1A527FBC8E213A1A96268A27B08CED8652A9354E29221BAA72B1F6EA8B4D2357F76A7B0AAF3F832C93E85D8C51250CD5015EE97ECE734A441A9F769431DDB02A1F255512EAABD94AA6C5C3C9548171621DD065498AF4CB337102514C1C4259B9147D844B75B011F6141FC27CD6AB483ACDF8855B38F4F42B2E024120546258F7FD1878368F9FE3FC43A648F242E0000, N'6.4.0')
GO
SET IDENTITY_INSERT [dbo].[Customers] ON 
GO
INSERT [dbo].[Customers] ([CustId], [CustName], [CustPhone], [CustAddress], [NoOfOrders]) VALUES (1, N'Ankit', 8800623668, N'Tri Nagar', 1)
GO
INSERT [dbo].[Customers] ([CustId], [CustName], [CustPhone], [CustAddress], [NoOfOrders]) VALUES (2, N'Neha', 8743046792, N'Akshardham', 3)
GO
SET IDENTITY_INSERT [dbo].[Customers] OFF
GO
SET IDENTITY_INSERT [dbo].[Orders] ON 
GO
INSERT [dbo].[Orders] ([OrderId], [OrderAmount], [OrderDate], [CustId], [ProdId]) VALUES (1, CAST(500.00 AS Decimal(18, 2)), CAST(N'2020-03-19T00:00:00.000' AS DateTime), 1, 1)
GO
INSERT [dbo].[Orders] ([OrderId], [OrderAmount], [OrderDate], [CustId], [ProdId]) VALUES (2, CAST(500.00 AS Decimal(18, 2)), CAST(N'2020-03-01T00:00:00.000' AS DateTime), 2, 2)
GO
INSERT [dbo].[Orders] ([OrderId], [OrderAmount], [OrderDate], [CustId], [ProdId]) VALUES (3, CAST(500.00 AS Decimal(18, 2)), CAST(N'2020-03-10T00:00:00.000' AS DateTime), 2, 1)
GO
INSERT [dbo].[Orders] ([OrderId], [OrderAmount], [OrderDate], [CustId], [ProdId]) VALUES (4, CAST(500.00 AS Decimal(18, 2)), CAST(N'2020-03-10T00:00:00.000' AS DateTime), 2, 1)
GO
SET IDENTITY_INSERT [dbo].[Orders] OFF
GO
SET IDENTITY_INSERT [dbo].[Products] ON 
GO
INSERT [dbo].[Products] ([ProdId], [ProdName], [ProdPrice]) VALUES (1, N'Sunglasses', CAST(500.00 AS Decimal(18, 2)))
GO
INSERT [dbo].[Products] ([ProdId], [ProdName], [ProdPrice]) VALUES (2, N'Bag', CAST(500.00 AS Decimal(18, 2)))
GO
SET IDENTITY_INSERT [dbo].[Products] OFF
GO
/****** Object:  Index [IX_CustId]    Script Date: 21-03-2020 15:20:21 ******/
CREATE NONCLUSTERED INDEX [IX_CustId] ON [dbo].[Orders]
(
	[CustId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
GO
/****** Object:  Index [IX_ProdId]    Script Date: 21-03-2020 15:20:21 ******/
CREATE NONCLUSTERED INDEX [IX_ProdId] ON [dbo].[Orders]
(
	[ProdId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
GO
ALTER TABLE [dbo].[Orders]  WITH CHECK ADD  CONSTRAINT [FK_dbo.Orders_dbo.Customers_CustId] FOREIGN KEY([CustId])
REFERENCES [dbo].[Customers] ([CustId])
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[Orders] CHECK CONSTRAINT [FK_dbo.Orders_dbo.Customers_CustId]
GO
ALTER TABLE [dbo].[Orders]  WITH CHECK ADD  CONSTRAINT [FK_dbo.Orders_dbo.Products_ProdId] FOREIGN KEY([ProdId])
REFERENCES [dbo].[Products] ([ProdId])
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[Orders] CHECK CONSTRAINT [FK_dbo.Orders_dbo.Products_ProdId]
GO
